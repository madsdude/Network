# IPses/VPN

#### IPsec (Internet Protocol Security) er en samling af protokoller, der er designet til at sikre internettet ved at autentificere og kryptere pakker af data, der sendes over et IP-netværk. Den bruges ofte til at implementere VPN'er (Virtual Private Networks), som skaber sikre forbindelser over offentlige eller usikre netværk som internettet. Ved at oprette en VPN ved hjælp af IPsec, kan organisationer og enkeltpersoner sikre fortrolig kommunikation mellem fjernkontorer, hjemmearbejdspladser og mobilbrugere.

#### IPsec kan fungere i to tilstande: Transporttilstand og Tunneltilstand. Transporttilstand krypterer kun payloaden i hver IP-pakke, mens Tunneltilstand krypterer både payloaden og headeren. Tunneltilstand bruges typisk i VPN-applikationer, hvor data mellem to netværk skal beskyttes, mens transporttilstand ofte bruges til ende-til-ende-kommunikation mellem to enheder.

#### IPsec indeholder også koncepter som sikkerhedspolitikker, som definerer, hvordan kommunikation mellem enheder skal sikres, og sikkerhedsassociationer, som er aftaler om, hvordan data skal krypteres og autentificeres.

#### En styrke ved IPsec er dens fleksibilitet og støtte til stærk kryptering og autentificeringsmetoder, hvilket gør det til et robust valg for at sikre følsom kommunikation over usikre netværk. IPsec er bredt understøttet på tværs af forskellige operativsystemer og netværksudstyr, hvilket gør det til et populært valg for implementering af VPN-løsninger.

| R1 Konfiguration | R2 Konfiguration | R3 Konfiguration | R4 Konfiguration |
|------------------|------------------|------------------|------------------|
|crypto isakmp policy 10<br>encryption 3des<br>authentication pre-share<br>hash md5<br>group 5<br>exit<br>crypto isakmp key BirkeboTunnel address 192.168.150.29<br>crypto isakmp key BirkeboTunnel address 192.168.150.39<br>crypto ipsec transform-set Birkebo esp-sha-hmac esp-3des<br>mode transport<br>exit<br>crypto ipsec profile SEC_GRE<br>set transform-set Birkebo<br>exit<br>interface tunnel0<br>no shut<br>ip address 10.10.10.1 255.255.255.252<br>tunnel source 192.168.150.25<br>tunnel destination 192.168.150.29<br>tunnel protection ipsec profile SEC_GRE<br>exit<br>interface tunnel1<br>no shut<br>ip address 10.10.20.1 255.255.255.252<br>tunnel source 192.168.150.25<br>tunnel destination 192.168.150.39<br>tunnel protection ipsec profile SEC_GRE<br>exit<br>router ospf 1<br>network 10.10.10.0 0.0.0.3 area 0<br>network 10.10.20.0 0.0.0.3 area 0 |crypto isakmp policy 10<br>encryption 3des<br>authentication pre-share<br>hash md5<br>group 5<br>exit<br>crypto isakmp key BirkeboTunnel address 192.168.150.29<br>crypto isakmp key BirkeboTunnel address 192.168.150.39<br>crypto ipsec transform-set Birkebo esp-sha-hmac esp-3des<br>mode transport<br>exit<br>crypto ipsec profile SEC_GRE<br>set transform-set Birkebo<br>exit<br>interface tunnel0<br>no shut<br>ip address 10.10.40.1 255.255.255.252<br>tunnel source 192.168.150.27<br>tunnel destination 192.168.150.39<br>tunnel protection ipsec profile SEC_GRE<br>exit<br>interface tunnel1<br>no shut<br>ip address 10.10.30.1 255.255.255.252<br>tunnel source 192.168.150.27<br>tunnel destination 192.168.150.29<br>tunnel protection ipsec profile SEC_GRE<br>exit<br>router ospf 1<br>network 10.10.30.0 0.0.0.3 area 0<br>network 10.10.40.0 0.0.0.3 area 0 |crypto isakmp policy 10<br>encryption 3des<br>authentication pre-share<br>hash md5<br>group 5<br>exit<br>crypto isakmp key BirkeboTunnel address 192.168.150.25<br>crypto isakmp key BirkeboTunnel address 192.168.150.27<br>crypto ipsec transform-set Birkebo esp-sha-hmac esp-3des<br>mode transport<br>exit<br>crypto ipsec profile SEC_GRE<br>set transform-set Birkebo<br>exit<br>interface tunnel0<br>no shut<br>ip address 10.10.10.2 255.255.255.252<br>tunnel source 192.168.150.29<br>tunnel destination 192.168.150.25<br>tunnel protection ipsec profile SEC_GRE<br>exit<br>interface tunnel1<br>no shut<br>ip address 10.10.30.2 255.255.255.252<br>tunnel source 192.168.150.29<br>tunnel destination 192.168.150.27<br>tunnel protection ipsec profile SEC_GRE<br>exit<br>router ospf 1<br>network 10.10.10.0 0.0.0.3 area 0<br>network 10.10.30.0 0.0.0.3 area 0<br>network 172.100.10.0 0.0.0.255 area 0<br>network 172.100.20.0 0.0.0.255 area 0<br>network 172.100.30.0 0.0.0.255 area 0<br>network 172.100.40.0 0.0.0.255 area 0<br>network 172.100.99.0 0.0.0.255 area 0<br>network 172.100.100.0 0.0.0.255 area 0 | crypto isakmp policy 10<br>encryption 3des<br>authentication pre-share<br>hash md5<br>group 5<br>exit<br>crypto isakmp key BirkeboTunnel address 192.168.150.25<br>crypto isakmp key BirkeboTunnel address 192.168.150.27<br>crypto ipsec transform-set Birkebo esp-sha-hmac esp-3des<br>mode transport<br>exit<br>crypto ipsec profile SEC_GRE<br>set transform-set Birkebo<br>exit<br>interface tunnel0<br>no shut<br>ip address 10.10.40.2 255.255.255.252<br>tunnel source 192.168.150.39<br>tunnel destination 192.168.150.27<br>tunnel protection ipsec profile SEC_GRE<br>exit<br>interface tunnel1<br>no shut<br>ip address 10.10.20.2 255.255.255.252<br>tunnel source 192.168.150.39<br>tunnel destination 192.168.150.25<br>tunnel protection ipsec profile SEC_GRE<br>exit<br>router ospf 1<br>network 10.10.20.0 0.0.0.3 area 0<br>network 10.10.40.0 0.0.0.3 area 0<br>network 172.100.10.0 0.0.0.255 area 0<br>network 172.100.20.0 0.0.0.255 area 0<br>network 172.100.30.0 0.0.0.255 area 0<br>network 172.100.40.0 0.0.0.255 area 0<br>network 172.100.99.0 0.0.0.255 area 0<br>network 172.100.100.0 0.0.0.255 area 0|





